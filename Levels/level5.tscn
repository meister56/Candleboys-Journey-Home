[gd_scene load_steps=15 format=4 uid="uid://mytts4h7lr6t"]

[ext_resource type="PackedScene" uid="uid://67no56y7b6m4" path="res://Scenes/CandleBoy.scn" id="1_cgt7a"]
[ext_resource type="Script" path="res://Scripts/CameraController.gd" id="2_1rt0h"]
[ext_resource type="PackedScene" uid="uid://b4mf4vewxohku" path="res://Scenes/Lighting/DarkEnvironment.scn" id="3_12ipt"]
[ext_resource type="Texture2D" uid="uid://djd0yljhlnbn2" path="res://Tiles/floor_atlas.png" id="4_0c6ye"]
[ext_resource type="PackedScene" uid="uid://b0g2qeb331kd6" path="res://Scenes/WallTileMap.scn" id="5_cjhu1"]
[ext_resource type="PackedScene" uid="uid://pdcu5qwmg833" path="res://Scenes/Door.tscn" id="7_fosn1"]
[ext_resource type="AudioStream" uid="uid://c8wyjh3whnbjx" path="res://Sounds/Evil/fake_door_mock1.wav" id="8_qipa3"]
[ext_resource type="PackedScene" uid="uid://ck78ifplt8qvd" path="res://Scenes/BadGuy.scn" id="9_fxn0n"]
[ext_resource type="AudioStream" uid="uid://d0nofapfmjev3" path="res://Sounds/Evil/demonic_sounds_distant.wav" id="10_cg0c6"]
[ext_resource type="Script" path="res://Scripts/PlaySoundInRange.gd" id="11_pxvj5"]
[ext_resource type="AudioStream" uid="uid://d114ooyl4u2of" path="res://Sounds/Evil/evil_laugh_fast_1.wav" id="12_tiulb"]
[ext_resource type="Script" path="res://Scripts/SceneChanger.gd" id="13_5lgvl"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_k0d7j"]
texture = ExtResource("4_0c6ye")
texture_region_size = Vector2i(64, 40)
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
4:0/0 = 0
2:1/0 = 0
3:1/0 = 0
0:0/0 = 0
0:1/0 = 0
1:1/0 = 0
1:2/0 = 0
2:2/0 = 0

[sub_resource type="TileSet" id="TileSet_ctcdx"]
tile_size = Vector2i(64, 40)
physics_layer_0/collision_layer = 2
sources/0 = SubResource("TileSetAtlasSource_k0d7j")

[node name="Level5" type="Node2D"]

[node name="CandleBoy" parent="." instance=ExtResource("1_cgt7a")]
position = Vector2(-4276, 1042)

[node name="Camera2D" type="Camera2D" parent="." node_paths=PackedStringArray("target")]
script = ExtResource("2_1rt0h")
target = NodePath("../CandleBoy")

[node name="Darkness" parent="." instance=ExtResource("3_12ipt")]
visible = false
position = Vector2(-380, -439)

[node name="Floor" type="TileMapLayer" parent="."]
z_index = -1
position = Vector2(24, 20)
scale = Vector2(2, 2)
tile_map_data = PackedByteArray("AAD///P/AAAAAAEAAAD///T/AAAAAAEAAAD///X/AAAAAAEAAAD///b/AAAAAAEAAAD///f/AAAAAAEAAAD///j/AAAAAAEAAAD///n/AAAAAAEAAAD///r/AAAAAAEAAAD///v/AAAAAAEAAAD///z/AAAAAAEAAAD///3/AAAAAAEAAAD///7/AAAAAAEAAAD/////AAAAAAEAAAD//wAAAAAAAAEAAAD//wEAAAAAAAEAAAD//wIAAAAAAAEAAAD//wMAAAAAAAEAAAD//wQAAAAAAAEAAAD//wUAAAAAAAEAAAD//wYAAAAAAAEAAAD//wcAAAAAAAEAAAD//wgAAAAAAAEAAAD//wkAAAAAAAEAAAD//woAAAAAAAEAAAD//wsAAAAAAAEAAAD//wwAAAAAAAEAAAD//w0AAAAAAAEAAAD//w4AAAAAAAEAAAD//w8AAAAAAAEAAAD//xAAAAAAAAEAAAD//xEAAAAAAAEAAAD3////AAAAAAEAAAD3/wAAAAAAAAEAAAD4////AAAAAAEAAAD4/wAAAAAAAAEAAAD5////AAAAAAEAAAD5/wAAAAAAAAEAAAD6////AAAAAAEAAAD6/wAAAAAAAAEAAAD7////AAAAAAEAAAD7/wAAAAAAAAEAAAD8////AAAAAAEAAAD8/wAAAAAAAAEAAAD9////AAAAAAEAAAD9/wAAAAAAAAEAAAD+////AAAAAAEAAAD+/wAAAAAAAAEAAAAAAP//AAAAAAEAAAAAAAAAAAAAAAEAAAABAP//AAAAAAEAAAABAAAAAAAAAAEAAAACAP//AAAAAAEAAAACAAAAAAAAAAEAAAADAP//AAAAAAEAAAADAAAAAAAAAAEAAAAEAP//AAAAAAEAAAAEAAAAAAAAAAEAAAAFAP//AAAAAAEAAAAFAAAAAAAAAAEAAAAGAP//AAAAAAEAAAAGAAAAAAAAAAEAAAAHAP//AAAAAAEAAAAHAAAAAAAAAAEAAAAIAP//AAAAAAEAAAAIAAAAAAAAAAEAAAAAAPP/AAAAAAEAAAAAAPT/AAAAAAEAAAAAAPX/AAAAAAEAAAAAAPb/AAAAAAEAAAAAAPf/AAAAAAEAAAAAAPj/AAAAAAEAAAAAAPn/AAAAAAEAAAAAAPr/AAAAAAEAAAAAAPv/AAAAAAEAAAAAAPz/AAAAAAEAAAAAAP3/AAAAAAEAAAAAAP7/AAAAAAEAAAAAAAEAAAAAAAEAAAAAAAIAAAAAAAEAAAAAAAMAAAAAAAEAAAAAAAQAAAAAAAEAAAAAAAUAAAAAAAEAAAAAAAYAAAAAAAEAAAAAAAcAAAAAAAEAAAAAAAgAAAAAAAEAAAAAAAkAAAAAAAEAAAAAAAoAAAAAAAEAAAAAAAsAAAAAAAEAAAAAAAwAAAAAAAEAAAAAAA0AAAAAAAEAAAAAAA4AAAAAAAEAAAAAAA8AAAAAAAEAAAAAABAAAAAAAAEAAAAAABEAAAAAAAEAAAABAAEAAAAAAAEAAAABAAIAAAAAAAEAAAABAAMAAAAAAAEAAAACAAEAAAAAAAEAAAACAAIAAAAAAAEAAAABAPz/AAAAAAEAAAABAP3/AAAAAAEAAAABAP7/AAAAAAEAAAACAP3/AAAAAAEAAAACAP7/AAAAAAEAAAD+//z/AAAAAAEAAAD+//3/AAAAAAEAAAD+//7/AAAAAAEAAAD9//3/AAAAAAEAAAD9//7/AAAAAAEAAAD9/wEAAAAAAAEAAAD9/wIAAAAAAAEAAAD+/wEAAAAAAAEAAAD+/wIAAAAAAAEAAAD+/wMAAAAAAAEAAAABAAQAAAAAAAEAAAACAAMAAAAAAAEAAAADAAEAAAAAAAEAAAADAAIAAAAAAAEAAAADAP7/AAAAAAEAAAADAP3/AAAAAAEAAAACAPz/AAAAAAEAAAABAPv/AAAAAAEAAAD+//v/AAAAAAEAAAD9//z/AAAAAAEAAAD8//7/AAAAAAEAAAD8/wEAAAAAAAEAAAD9/wMAAAAAAAEAAAD+/wQAAAAAAAEAAAD8/wIAAAAAAAEAAAD9/wQAAAAAAAEAAAD+/wUAAAAAAAEAAAABAAUAAAAAAAEAAAACAAQAAAAAAAEAAAD8//3/AAAAAAEAAAD9//v/AAAAAAEAAAD+//r/AAAAAAEAAAABAPr/AAAAAAEAAAACAPv/AAAAAAEAAAADAPz/AAAAAAEAAAA=")
tile_set = SubResource("TileSet_ctcdx")

[node name="Walls" parent="." instance=ExtResource("5_cjhu1")]
tile_map_data = PackedByteArray()

[node name="Door" parent="." node_paths=PackedStringArray("candles_lit_required") instance=ExtResource("7_fosn1")]
position = Vector2(1261, -1732)
scale = Vector2(1.2, 1.2)
candles_lit_required = [NodePath(""), NodePath("")]

[node name="Laugh" type="AudioStreamPlayer2D" parent="Door"]
stream = ExtResource("8_qipa3")

[node name="BadGuy" parent="." instance=ExtResource("9_fxn0n")]
position = Vector2(1164, 1028)

[node name="PlayInRange" type="AudioStreamPlayer2D" parent="."]
position = Vector2(5, 361)
stream = ExtResource("10_cg0c6")
script = ExtResource("11_pxvj5")

[node name="DeathZone" type="Area2D" parent="."]
position = Vector2(535, 552)
scale = Vector2(2.08, 2.08)

[node name="Music" type="AudioStreamPlayer" parent="."]

[node name="PlaySoundInRange" type="AudioStreamPlayer2D" parent="."]
position = Vector2(-3348, 1239)
stream = ExtResource("12_tiulb")
script = ExtResource("11_pxvj5")
distance = 300.0

[node name="ToLVL5" type="Node" parent="."]
script = ExtResource("13_5lgvl")

[node name="BadGuy2" parent="." instance=ExtResource("9_fxn0n")]
position = Vector2(541, 2905)

[node name="BadGuy3" parent="." instance=ExtResource("9_fxn0n")]
position = Vector2(1171, 1401)

[node name="BadGuy4" parent="." instance=ExtResource("9_fxn0n")]
position = Vector2(1468, 381)

[node name="Escape" parent="." instance=ExtResource("7_fosn1")]
position = Vector2(2694, -1577)
scale = Vector2(1.2, 1.2)

[connection signal="just_opened" from="Door" to="Door/Laugh" method="play"]
[connection signal="body_entered" from="DeathZone" to="CandleBoy" method="_on_death_zone_body_entered"]
[connection signal="just_opened" from="Escape" to="ToLVL5" method="change_scene" binds= [""]]
